{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-4">
    <h2 class="mb-4 text-center">➕ Add New Product</h2>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <div class="mb-3">
                            <label class="form-label">Product Name</label>
                            {{ form.name }}
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Category</label>
                            {{ form.category }}
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Stock</label>
                            {{ form.stock }}
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Price</label>
                            {{ form.price }}
                        </div>
						<div class="mb-3">
                           <label class="form-label">Supplier Name</label>
                            {{ form.supplier_name }}
                              </div>

                        <div class="mb-3">
                        <label class="form-label">Supplier Contact</label>
                        {{ form.supplier_contact }}
                           </div>


                        <div class="mb-3">
                            <label class="form-label">Product Image</label>
                            {{ form.image }}
                            <div class="mt-2">
                                <img id="imagePreview" src="{% static 'img/no-image.png' %}" 
                                     alt="Preview" class="img-fluid rounded" style="max-height: 200px;">
                            </div>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a href="{% url 'product_list' %}" class="btn btn-secondary">⬅️ Back</a>
                            <button type="submit" class="btn btn-primary">✅ Save Product</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const imageInput = document.querySelector('input[type="file"]');
    const preview = document.getElementById("imagePreview");

    if (imageInput) {
        imageInput.addEventListener("change", function() {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });
    }
});
</script>
{% endblock %}
